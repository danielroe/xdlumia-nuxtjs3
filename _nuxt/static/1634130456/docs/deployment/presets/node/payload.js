__NUXT_JSONP__("/docs/deployment/presets/node", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj){return {data:[{page:{key:"content:3.docs:3.deployment:99.presets:node.md",generatedAt:new Date(1634130501455),mtime:new Date(1634130501446),slug:"node",title:H,position:"000300030099",to:"\u002Fdocs\u002Fdeployment\u002Fpresets\u002Fnode",draft:q,page:r,language:"en",empty:q,description:I,excerpt:J,body:{raw:"# Node.js function\n\nDiscover the Node.js function preset with Nitro to attach Nuxt as a middleware to any Node.js server.\n\n::list\n- Compatible with many Node.js servers\n- Drop-in usage with express or native http server\n- Loads only the chunks required to render the request for optimal cold start timing\n::\n\n::alert{icon=IconPresets}\nBack to [presets list](\u002Fdocs\u002Fdeployment\u002Fpresets).\n::\n\n## Usage\n\nYou can use the [Nuxt config](\u002Fdocs\u002Fdirectory-structure\u002Fnuxt.config) to explicity set the preset to use:\n\n```ts [nuxt.config.js|ts]\nexport default {\n  nitro: {\n    preset: 'node'\n  }\n}\n```\n\nOr directly use the `NITRO_PRESET` environment variable when running `nuxt build`:\n\n```bash\nNITRO_PRESET=node npx nuxt build\n```\n\n## Entrypoint\n\nWhen running `nuxt build` with the Node preset, the result will be an entrypoint exporting a function with the familiar `(req, res) =\u003E {}` signature used in [express](https:\u002F\u002Fexpressjs.com\u002F), [h3](https:\u002F\u002Fgithub.com\u002Funjs\u002Fh3), etc.\n\n::alert{type=warning}\nIt is not recommended to use this preset directly, and particularly not with a 3rd-party server.\n::\n\n## Example\n\n### Express middleware\n\n```ts\nimport express from 'express'\nimport handler from '.\u002F.output\u002Fserver'\n\nconst app = express()\n\napp.use(handler)\napp.listen(3000)\n```\n\n### Node server\n\n```ts\nimport { createServer } from 'http'\nimport handler from '.\u002F.output\u002Fserver'\n\nconst server = createServer(handler)\nserver.listen(8080)\n```\n\n",ast:{type:"root",children:[{type:b,tag:"prose-h1",props:{class:"d-heading-title",id:"nodejs-function"},children:[{type:a,value:H}]},{type:a,value:e},{type:b,tag:j,props:{class:"d-heading-description"},children:[{type:a,value:I}]},{type:a,value:e},{type:b,tag:"list",props:{},children:[{type:b,tag:"prose-ul",props:{},children:[{type:a,value:e},{type:b,tag:A,props:{},children:[{type:a,value:e},{type:a,value:"Compatible with many Node.js servers"},{type:a,value:e}]},{type:a,value:e},{type:b,tag:A,props:{},children:[{type:a,value:e},{type:a,value:"Drop-in usage with express or native http server"},{type:a,value:e}]},{type:a,value:e},{type:b,tag:A,props:{},children:[{type:a,value:e},{type:a,value:"Loads only the chunks required to render the request for optimal cold start timing"},{type:a,value:e}]},{type:a,value:e}]}]},{type:a,value:e},{type:b,tag:K,props:{icon:"IconPresets"},children:[{type:b,tag:j,props:{},children:[{type:a,value:"Back to "},{type:b,tag:i,props:{href:"\u002Fdocs\u002Fdeployment\u002Fpresets"},children:[{type:a,value:"presets list"}]},{type:a,value:s}]}]},{type:a,value:e},{type:b,tag:B,props:{id:L},children:[{type:b,tag:i,props:{href:"#usage"},children:[{type:a,value:M}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"You can use the "},{type:b,tag:i,props:{href:"\u002Fdocs\u002Fdirectory-structure\u002Fnuxt.config"},children:[{type:a,value:"Nuxt config"}]},{type:a,value:" to explicity set the preset to use:"}]},{type:a,value:e},{type:b,tag:t,props:{},children:[{type:b,tag:c,props:{className:["filename"]},children:[{type:a,value:"nuxt.config.js|ts"}]},{type:b,tag:u,props:{className:[v,C]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"export"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"default"}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:"\n  nitro"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:"\n    preset"},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:E}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"'node'"}]},{type:a,value:"\n  "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:F}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:F}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"Or directly use the "},{type:b,tag:x,props:{},children:[{type:a,value:N}]},{type:a,value:" environment variable when running "},{type:b,tag:x,props:{},children:[{type:a,value:O}]},{type:a,value:E}]},{type:a,value:e},{type:b,tag:t,props:{},children:[{type:b,tag:u,props:{className:[v,"language-bash"]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,"assign-left","variable"]},children:[{type:a,value:N}]},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:G}]},{type:a,value:"node npx nuxt build\n"}]}]}]},{type:a,value:e},{type:b,tag:B,props:{id:P},children:[{type:b,tag:i,props:{href:"#entrypoint"},children:[{type:a,value:Q}]}]},{type:a,value:e},{type:b,tag:j,props:{},children:[{type:a,value:"When running "},{type:b,tag:x,props:{},children:[{type:a,value:O}]},{type:a,value:" with the Node preset, the result will be an entrypoint exporting a function with the familiar "},{type:b,tag:x,props:{},children:[{type:a,value:"(req, res) =\u003E {}"}]},{type:a,value:" signature used in "},{type:b,tag:i,props:{href:"https:\u002F\u002Fexpressjs.com\u002F",rel:[R,S,T],target:U},children:[{type:a,value:V}]},{type:a,value:", "},{type:b,tag:i,props:{href:"https:\u002F\u002Fgithub.com\u002Funjs\u002Fh3",rel:[R,S,T],target:U},children:[{type:a,value:"h3"}]},{type:a,value:", etc."}]},{type:a,value:e},{type:b,tag:K,props:{type:"warning"},children:[{type:b,tag:j,props:{},children:[{type:a,value:"It is not recommended to use this preset directly, and particularly not with a 3rd-party server."}]}]},{type:a,value:e},{type:b,tag:B,props:{id:W},children:[{type:b,tag:i,props:{href:"#example"},children:[{type:a,value:X}]}]},{type:a,value:e},{type:b,tag:Y,props:{id:Z},children:[{type:b,tag:i,props:{href:"#express-middleware"},children:[{type:a,value:_}]}]},{type:a,value:e},{type:b,tag:t,props:{},children:[{type:b,tag:u,props:{className:[v,C]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:a,value:" express "},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:z}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"'express'"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:z}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aa}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:ac}]},{type:a,value:" app "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:"\n\napp"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"use"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:"\napp"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"3000"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:Y,props:{id:ag},children:[{type:b,tag:i,props:{href:"#node-server"},children:[{type:a,value:ah}]}]},{type:a,value:e},{type:b,tag:t,props:{},children:[{type:b,tag:u,props:{className:[v,C]},children:[{type:b,tag:w,props:{},children:[{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:D}]},{type:a,value:" createServer "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:F}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:z}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"'http'"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:y}]},{type:a,value:$},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:z}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aa}]},{type:a,value:ab},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:ac}]},{type:a,value:" server "},{type:b,tag:c,props:{className:[d,k]},children:[{type:a,value:G}]},{type:a,value:h},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"createServer"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:"\nserver"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:s}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:ae}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:n}]},{type:b,tag:c,props:{className:[d,af]},children:[{type:a,value:"8080"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:o}]},{type:a,value:e}]}]}]}]},toc:{title:ai,searchDepth:p,depth:p,links:[{id:L,depth:p,text:M},{id:P,depth:p,text:Q},{id:W,depth:p,text:X,children:[{id:Z,depth:aj,text:_},{id:ag,depth:aj,text:ah}]}]}},template:"Docs"},templateOptions:{header:r,footer:r,aside:r,asideClass:ai,fluid:q,banner:q},_img:{}}],fetch:{"0":{headerLinks:[{title:"开始",to:"\u002Fgetting-started\u002Fintroduction"},{title:"概念",to:"\u002Fconcepts\u002Fintroduction"},{title:"文档",to:"\u002Fdocs\u002Fusage\u002Fdata-fetching"},{title:"社区",to:"\u002Fcommunity\u002Fgetting-help"}]},"1":{repoUrl:"https:\u002F\u002Fgithub.com\u002Fnuxt\u002Fframework",prev:{slug:"lambda",to:"\u002Fdocs\u002Fdeployment\u002Fpresets\u002Flambda",title:"Lambda function"},next:{slug:"server",to:"\u002Fdocs\u002Fdeployment\u002Fpresets\u002Fserver",title:"Node.js server"}},_lazyComponents:new Set(["ProseParagraph","ButtonLink","HomeHero","SectionContentItem","HomeFeatures","IconNuxtNitro","Headline","ProseStrong","ProseA","ProseCodeInline","NuxtContainer","IconNuxtBridge","ProseH3","ProseLi","ProseUl","List","ProseH1","Alert","ProseH2","ProseTh","ProseTr","ProseThead","ProseTd","ProseTbody","ProseTable","ProseCode","ProseEm","CodeGroup","ProseH4","ProseOl","ProseBlockquote"])},mutations:J}}("text","element","span","token","\n","punctuation","keyword"," ","prose-a","prose-paragraph","operator","string","function","(",")",2,false,true,".","prose-code","pre","line-numbers","code","prose-code-inline","import","from","prose-li","prose-h2","language-ts","{",":","}","=","Node.js function","Discover the Node.js function preset with Nitro to attach Nuxt as a middleware to any Node.js server.",void 0,"alert","usage","Usage","NITRO_PRESET","nuxt build","entrypoint","Entrypoint","nofollow","noopener","noreferrer","_blank","express","example","Example","prose-h3","express-middleware","Express middleware"," handler ","'.\u002F.output\u002Fserver'","\n\n","const","handler","listen","number","node-server","Node server","",3)));