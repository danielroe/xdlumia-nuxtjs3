{"key":"content:3.docs:3.deployment:5.pm2.md","generatedAt":"2021-10-13T13:08:13.123Z","mtime":"2021-10-13T13:08:13.118Z","slug":"pm2","title":"PM2","position":"000300030005","to":"/docs/deployment/pm2","draft":false,"page":true,"language":"en","icon":"LogoPM2","empty":false,"description":"How to deploy Nuxt to a Node.js hosting using PM2.","body":{"raw":"---\nicon: LogoPM2\n---\n\n# PM2\n\nHow to deploy Nuxt to a Node.js hosting using PM2.\n\n::list\n- Support for ultra-minimal SSR build\n- Zero millisecond cold start\n- More configuration required\n::\n\n## Setup\n\nMake sure another preset isn't set in `nuxt.config`.\n\n```ts [nuxt.config.js]\nexport default {\n  nitro: {\n    // this is the default preset so you can also just omit it entirely\n    // preset: 'server'\n  }\n}\n```\n\n## Deployment\n\nAfter running `yarn build`, all you need is in the `.output` folder. Static assets are in the `public` subdirectory and the server and its dependencies are within the `server` subdirectory.\n\nThis `.output` folder can be deployed to your Node.js host and the server can be run using [`pm2`](https://pm2.keymetrics.io/docs/).\n\nTo start the server in production mode, run:\n\n```bash\nnode .output/server/index.mjs\n```\n\nFor example, using `pm2`:\n\n```js [ecosystem.config.js]\nmodule.exports = {\n  apps: [\n    {\n      name: 'NuxtAppName',\n      exec_mode: 'cluster',\n      instances: 'max',\n      script: './.output/server/index.js'\n    }\n  ]\n}\n```\n\n## More information\n\nSee [more information on the server preset](/presets/server).\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"pm2"},"children":[{"type":"text","value":"PM2"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"How to deploy Nuxt to a Node.js hosting using PM2."}]},{"type":"text","value":"\n"},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Support for ultra-minimal SSR build"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Zero millisecond cold start"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"More configuration required"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"setup"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#setup"},"children":[{"type":"text","value":"Setup"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Make sure another preset isn't set in "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt.config"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  nitro"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// this is the default preset so you can also just omit it entirely"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"// preset: 'server'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"deployment"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#deployment"},"children":[{"type":"text","value":"Deployment"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"After running "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"yarn build"}]},{"type":"text","value":", all you need is in the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".output"}]},{"type":"text","value":" folder. Static assets are in the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" subdirectory and the server and its dependencies are within the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"server"}]},{"type":"text","value":" subdirectory."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"This "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":".output"}]},{"type":"text","value":" folder can be deployed to your Node.js host and the server can be run using "},{"type":"element","tag":"prose-a","props":{"href":"https://pm2.keymetrics.io/docs/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"pm2"}]}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"To start the server in production mode, run:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"node .output/server/index.mjs\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For example, using "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"pm2"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"ecosystem.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"module"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"className":["token","property-access"]},"children":[{"type":"text","value":"exports"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  apps"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      name"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'NuxtAppName'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n      exec_mode"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'cluster'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n      instances"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'max'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n      script"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'./.output/server/index.js'"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"more-information"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#more-information"},"children":[{"type":"text","value":"More information"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"See "},{"type":"element","tag":"prose-a","props":{"href":"/presets/server"},"children":[{"type":"text","value":"more information on the server preset"}]},{"type":"text","value":"."}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"setup","depth":2,"text":"Setup"},{"id":"deployment","depth":2,"text":"Deployment"},{"id":"more-information","depth":2,"text":"More information"}]}}}