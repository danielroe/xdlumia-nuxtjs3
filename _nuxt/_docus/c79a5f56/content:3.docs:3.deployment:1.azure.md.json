{"key":"content:3.docs:3.deployment:1.azure.md","generatedAt":"2021-10-13T13:08:13.112Z","mtime":"2021-10-13T13:08:13.097Z","slug":"azure","title":"Azure","position":"000300030001","to":"/docs/deployment/azure","draft":false,"page":true,"language":"en","icon":"LogoAzure","empty":false,"description":"How to deploy Nuxt to Azure Static Web Apps or Azure Functions.","body":{"raw":"---\nicon: LogoAzure\n---\n\n# Azure\n\nHow to deploy Nuxt to Azure Static Web Apps or Azure Functions.\n\n## Azure Functions\n\n::list\n- Support for serverless SSR build\n- No configuration required\n- Static assets served from Azure Function\n::\n\n### Setup\n\n```js [nuxt.config.js]\nexport default {\n  nitro: {\n    preset: 'azure_functions'\n  }\n}\n```\n\n### Local preview\n\nInstall [Azure Functions Core Tools](https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local) if you want to test locally.\n\nYou can invoke a development environment from the serverless directory.\n\n```bash\nNITRO_PRESET=azure_functions yarn build\ncd .output\nfunc start\n```\n\nYou can now visit http://localhost:7071/ in your browser and browse your site running locally on Azure Functions.\n\n### Deploy from your local machine\n\nTo deploy, just run the following command:\n```bash\n# To publish the bundled zip file\naz functionapp deployment source config-zip -g <resource-group> -n <app-name> --src dist/deploy.zip\n# Alternatively you can publish from source\ncd dist && func azure functionapp publish --javascript <app-name>\n```\n\n### Deploy from CI/CD via GitHub Actions\n\nFirst, obtain your Azure Functions Publish Profile and add it as a secret to your GitHub repository settings following [these instructions](https://github.com/Azure/functions-action#using-publish-profile-as-deployment-credential-recommended).\n\nThen create the following file as a workflow:\n\n```yml{}[.github/workflows/azure.yml]\nname: azure\non:\n  push:\n    branches:\n      - main\n  pull_request:\n    branches:\n      - main\njobs:\n  deploy:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [ ubuntu-latest ]\n        node: [ 12 ]\n    steps:\n      - uses: actions/setup-node@v2\n        with:\n          node-version: ${{ matrix.node }}\n\n      - name: Checkout\n        uses: actions/checkout@master\n\n      - name: Get yarn cache directory path\n        id: yarn-cache-dir-path\n        run: echo \"::set-output name=dir::$(yarn cache dir)\"\n\n      - uses: actions/cache@v2\n        id: yarn-cache\n        with:\n          path: ${{ steps.yarn-cache-dir-path.outputs.dir }}\n          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-yarn-azure\n\n      - name: Install Dependencies\n        if: steps.cache.outputs.cache-hit != 'true'\n        run: yarn\n\n      - name: Build\n        run: npm run build\n        env:\n          NITRO_PRESET: azure\n\n      - name: 'Deploy to Azure Functions'\n        uses: Azure/functions-action@v1\n        with:\n          app-name: <your-app-name>\n          package: .output/deploy.zip\n          publish-profile: ${{ secrets.AZURE_FUNCTIONAPP_PUBLISH_PROFILE }}\n```\n\n### Optimizing Azure Functions\n\nConsider [turning on immutable packages](https://docs.microsoft.com/en-us/azure/app-service/deploy-run-package) to support running your app from the zipfile. This can speed up cold starts.\n\n### Demo\n\nA live demo is available on https://nuxt-nitro.azurewebsites.net/\n\n## Azure Static Web Apps\n\nHow to deploy Nuxt to Azure Static Web Apps with Nuxt Nitro.\n\n::list\n- Support for serverless SSR build\n- Auto-detected when deploying\n- Minimal configuration required\n::\n\n### Setup\n\nAzure Static Web Apps are designed to be deployed continuously in a [GitHub Actions workflow](https://docs.microsoft.com/en-us/azure/static-web-apps/github-actions-workflow). By default, Nitro will detect this deployment environment and enable the `azure` preset.\n\n### Deploy from CI/CD via GitHub Actions\n\nWhen you link your GitHub repository to Azure Static Web Apps, a workflow file is added to the repository.\n\nFind the build configuration section in this workflow and update the build configuration:\n\n```yml{}[.github/workflows/azure-static-web-apps-<RANDOM_NAME>.yml]\n###### Repository/Build Configurations ######\napp_location: '/'\napi_location: '.output/server'\noutput_location: '.output/public'\n###### End of Repository/Build Configurations ######\n```\n\n**Note**\n\nPending an update in the [Azure Static Web Apps workflow](https://github.com/Azure/static-web-apps-deploy), you will also need to run the following in your root directory:\n```bash\nmkdir -p .output/server\ntouch .output/server/.gitkeep\ngit add -f .output/server/.gitkeep\n```\n\nThat's it! Now Azure Static Web Apps will automatically deploy your Nitro-powered Nuxt application on push.\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"azure"},"children":[{"type":"text","value":"Azure"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"How to deploy Nuxt to Azure Static Web Apps or Azure Functions."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"azure-functions"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#azure-functions"},"children":[{"type":"text","value":"Azure Functions"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Support for serverless SSR build"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"No configuration required"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Static assets served from Azure Function"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"setup"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#setup"},"children":[{"type":"text","value":"Setup"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-js"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword","module"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  nitro"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    preset"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'azure_functions'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"local-preview"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#local-preview"},"children":[{"type":"text","value":"Local preview"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Install "},{"type":"element","tag":"prose-a","props":{"href":"https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Azure Functions Core Tools"}]},{"type":"text","value":" if you want to test locally."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can invoke a development environment from the serverless directory."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NITRO_PRESET"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"azure_functions "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"yarn"}]},{"type":"text","value":" build\n"},{"type":"element","tag":"span","props":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"cd"}]},{"type":"text","value":" .output\nfunc start\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can now visit "},{"type":"element","tag":"prose-a","props":{"href":"http://localhost:7071/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:7071/"}]},{"type":"text","value":" in your browser and browse your site running locally on Azure Functions."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"deploy-from-your-local-machine"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#deploy-from-your-local-machine"},"children":[{"type":"text","value":"Deploy from your local machine"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"To deploy, just run the following command:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# To publish the bundled zip file"}]},{"type":"text","value":"\naz functionapp deployment "},{"type":"element","tag":"span","props":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"source"}]},{"type":"text","value":" config-zip -g "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"resource-group"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" -n "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"app-name"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" --src dist/deploy.zip\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"# Alternatively you can publish from source"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","builtin","class-name"]},"children":[{"type":"text","value":"cd"}]},{"type":"text","value":" dist "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"&&"}]},{"type":"text","value":" func azure functionapp publish --javascript "},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":"app-name"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"deploy-from-cicd-via-github-actions"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#deploy-from-cicd-via-github-actions"},"children":[{"type":"text","value":"Deploy from CI/CD via GitHub Actions"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"First, obtain your Azure Functions Publish Profile and add it as a secret to your GitHub repository settings following "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/Azure/functions-action#using-publish-profile-as-deployment-credential-recommended","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"these instructions"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Then create the following file as a workflow:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":".github/workflows/azure.yml"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" azure\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" main\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"pull_request"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"branches"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" main\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"jobs"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"deploy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"runs-on"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" matrix.os "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"strategy"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"matrix"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"os"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":" ubuntu"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"latest "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","number"]},"children":[{"type":"text","value":"12"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"steps"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" actions/setup"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"node@v2\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"node-version"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" matrix.node "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Checkout\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" actions/checkout@master\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Get yarn cache directory path\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" yarn"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cache"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"dir"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"path\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" echo \""},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"set"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"output name=dir"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"$(yarn cache dir)\"\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" actions/cache@v2\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" yarn"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cache\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"path"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" steps.yarn"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"cache"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"dir"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"path.outputs.dir "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"key"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" runner.os "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"yarn"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"$"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" hashFiles('"},{"type":"element","tag":"span","props":{"className":["token","important"]},"children":[{"type":"text","value":"**/yarn.lock')"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"restore-keys"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"|"}]},{"type":"element","tag":"span","props":{"className":["token","scalar","string"]},"children":[{"type":"text","value":"\n            ${{ runner.os }}-yarn-azure"}]},{"type":"text","value":"\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Install Dependencies\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" steps.cache.outputs.cache"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"hit "},{"type":"element","tag":"span","props":{"className":["token","tag"]},"children":[{"type":"text","value":"!="}]},{"type":"text","value":" 'true'\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" yarn\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Build\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" npm run build\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"env"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"NITRO_PRESET"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" azure\n\n      "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'Deploy to Azure Functions'"}]},{"type":"text","value":"\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" Azure/functions"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"action@v1\n        "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"with"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app-name"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" <your"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"app"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"name"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":"\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"package"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" .output/deploy.zip\n          "},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"publish-profile"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" $"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" secrets.AZURE_FUNCTIONAPP_PUBLISH_PROFILE "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"optimizing-azure-functions"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#optimizing-azure-functions"},"children":[{"type":"text","value":"Optimizing Azure Functions"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Consider "},{"type":"element","tag":"prose-a","props":{"href":"https://docs.microsoft.com/en-us/azure/app-service/deploy-run-package","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"turning on immutable packages"}]},{"type":"text","value":" to support running your app from the zipfile. This can speed up cold starts."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"demo"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#demo"},"children":[{"type":"text","value":"Demo"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"A live demo is available on "},{"type":"element","tag":"prose-a","props":{"href":"https://nuxt-nitro.azurewebsites.net/","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"https://nuxt-nitro.azurewebsites.net/"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"azure-static-web-apps"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#azure-static-web-apps"},"children":[{"type":"text","value":"Azure Static Web Apps"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"How to deploy Nuxt to Azure Static Web Apps with Nuxt Nitro."}]},{"type":"text","value":"\n"},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Support for serverless SSR build"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Auto-detected when deploying"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Minimal configuration required"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"setup-1"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#setup-1"},"children":[{"type":"text","value":"Setup"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Azure Static Web Apps are designed to be deployed continuously in a "},{"type":"element","tag":"prose-a","props":{"href":"https://docs.microsoft.com/en-us/azure/static-web-apps/github-actions-workflow","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"GitHub Actions workflow"}]},{"type":"text","value":". By default, Nitro will detect this deployment environment and enable the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"azure"}]},{"type":"text","value":" preset."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h3","props":{"id":"deploy-from-cicd-via-github-actions-1"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#deploy-from-cicd-via-github-actions-1"},"children":[{"type":"text","value":"Deploy from CI/CD via GitHub Actions"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"When you link your GitHub repository to Azure Static Web Apps, a workflow file is added to the repository."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Find the build configuration section in this workflow and update the build configuration:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":".github/workflows/azure-static-web-apps-<RANDOM_NAME>.yml"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-yml"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"###### Repository/Build Configurations ######"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"app_location"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'/'"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"api_location"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'.output/server'"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"output_location"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'.output/public'"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","comment"]},"children":[{"type":"text","value":"###### End of Repository/Build Configurations ######"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Note"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Pending an update in the "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/Azure/static-web-apps-deploy","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"Azure Static Web Apps workflow"}]},{"type":"text","value":", you will also need to run the following in your root directory:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"mkdir"}]},{"type":"text","value":" -p .output/server\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"touch"}]},{"type":"text","value":" .output/server/.gitkeep\n"},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"git"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","function"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" -f .output/server/.gitkeep\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"That's it! Now Azure Static Web Apps will automatically deploy your Nitro-powered Nuxt application on push."}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"azure-functions","depth":2,"text":"Azure Functions","children":[{"id":"setup","depth":3,"text":"Setup"},{"id":"local-preview","depth":3,"text":"Local preview"},{"id":"deploy-from-your-local-machine","depth":3,"text":"Deploy from your local machine"},{"id":"deploy-from-cicd-via-github-actions","depth":3,"text":"Deploy from CI/CD via GitHub Actions"},{"id":"optimizing-azure-functions","depth":3,"text":"Optimizing Azure Functions"},{"id":"demo","depth":3,"text":"Demo"}]},{"id":"azure-static-web-apps","depth":2,"text":"Azure Static Web Apps","children":[{"id":"setup-1","depth":3,"text":"Setup"},{"id":"deploy-from-cicd-via-github-actions-1","depth":3,"text":"Deploy from CI/CD via GitHub Actions"}]}]}}}