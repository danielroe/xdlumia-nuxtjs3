{"key":"content:3.docs:3.deployment:99.presets:service-worker.md","generatedAt":"2021-10-13T13:08:13.206Z","mtime":"2021-10-13T13:08:13.192Z","slug":"service-worker","title":"Service worker","position":"000300030099","to":"/docs/deployment/presets/service-worker","draft":false,"page":true,"language":"en","empty":false,"description":"Explore the Service worker preset with Nitro to push the boundaries of Nuxt rendering to the edge.","body":{"raw":"# Service worker\n\nExplore the Service worker preset with Nitro to push the boundaries of Nuxt rendering to the edge.\n\n::list\n- Can be used for edge-side rendering\n- No dependency on Node.js\n- No Node.js environment and features\n::\n\n::alert{icon=IconPresets}\nBack to [presets list](/docs/deployment/presets).\n::\n\n::alert{type=warning}\nDeployment as service worker has some limitations since SSR code is not running in Node.js environment but pure JavaScript.\n::\n\n## Usage\n\nYou can use the [Nuxt config](/docs/directory-structure/nuxt.config) to explicity set the preset to use:\n\n```ts [nuxt.config.js|ts]\nexport default {\n  nitro: {\n    preset: 'worker'\n  }\n}\n```\n\nOr directly use the `NITRO_PRESET` environment variable when running `nuxt build`:\n\n```bash\nNITRO_PRESET=worker npx nuxt build\n```\n\n## Entrypoint\n\nThe worker preset produces a service worker that can provide full HTML rendering within a worker context (for example [Cloudflare Workers](/docs/deployment/cloudflare)). It registers appropriate handlers for `fetch`, `install` and `activate`.\n\nFor more information you can see the [source code](https://github.com/nuxt/framework/blob/main/packages/nitro/src/runtime/entries/service-worker.ts).\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"service-worker"},"children":[{"type":"text","value":"Service worker"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Explore the Service worker preset with Nitro to push the boundaries of Nuxt rendering to the edge."}]},{"type":"text","value":"\n"},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Can be used for edge-side rendering"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"No dependency on Node.js"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"No Node.js environment and features"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"IconPresets"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Back to "},{"type":"element","tag":"prose-a","props":{"href":"/docs/deployment/presets"},"children":[{"type":"text","value":"presets list"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"type":"warning"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Deployment as service worker has some limitations since SSR code is not running in Node.js environment but pure JavaScript."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"usage"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#usage"},"children":[{"type":"text","value":"Usage"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can use the "},{"type":"element","tag":"prose-a","props":{"href":"/docs/directory-structure/nuxt.config"},"children":[{"type":"text","value":"Nuxt config"}]},{"type":"text","value":" to explicity set the preset to use:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js|ts"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  nitro"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    preset"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'worker'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Or directly use the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"NITRO_PRESET"}]},{"type":"text","value":" environment variable when running "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NITRO_PRESET"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"worker npx nuxt build\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"entrypoint"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#entrypoint"},"children":[{"type":"text","value":"Entrypoint"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"The worker preset produces a service worker that can provide full HTML rendering within a worker context (for example "},{"type":"element","tag":"prose-a","props":{"href":"/docs/deployment/cloudflare"},"children":[{"type":"text","value":"Cloudflare Workers"}]},{"type":"text","value":"). It registers appropriate handlers for "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"fetch"}]},{"type":"text","value":", "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"install"}]},{"type":"text","value":" and "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"activate"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"For more information you can see the "},{"type":"element","tag":"prose-a","props":{"href":"https://github.com/nuxt/framework/blob/main/packages/nitro/src/runtime/entries/service-worker.ts","rel":["nofollow","noopener","noreferrer"],"target":"_blank"},"children":[{"type":"text","value":"source code"}]},{"type":"text","value":"."}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usage","depth":2,"text":"Usage"},{"id":"entrypoint","depth":2,"text":"Entrypoint"}]}}}