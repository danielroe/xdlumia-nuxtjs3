{"key":"content:3.docs:3.deployment:99.presets:server.md","generatedAt":"2021-10-13T13:08:13.192Z","mtime":"2021-10-13T13:08:13.175Z","slug":"server","title":"Node.js server","position":"000300030099","to":"/docs/deployment/presets/server","draft":false,"page":true,"language":"en","empty":false,"description":"Discover the Node.js server preset with Nitro to deploy on any Node hosting.","body":{"raw":"# Node.js server\n\nDiscover the Node.js server preset with Nitro to deploy on any Node hosting.\n\n::list\n- **Default preset** if none is specified or auto-detected <br>\n- Loads only the required chunks to render the request for optimal cold start timing <br>\n- Useful for debugging\n::\n\n::alert{icon=IconPresets}\nBack to [presets list](/docs/deployment/presets).\n::\n\n## Usage\n\nYou can use the [Nuxt config](/docs/directory-structure/nuxt.config) to explicity set the preset to use:\n\n```ts [nuxt.config.js|ts]\nexport default {\n  nitro: {\n    preset: 'server'\n  }\n}\n```\n\nOr directly use the `NITRO_PRESET` environment variable when running `nuxt build`:\n\n```bash\nNITRO_PRESET=server npx nuxt build\n```\n\n## Entrypoint\n\nWhen running `nuxt build` with the Node server preset, the result will be an entrypoint that launches a ready-to-run Node server.\n\n```bash\nnode .output/server/index.mjs\n```\n\n## Example\n\n```bash\n$ node .output/server/index.mjs\nListening on http://localhost:3000\n```\n\n## Server timings\n\nYou can enable the `nitro.timing` option in order to have the logs about the chunk loading and cold start performance.\n\n```ts [nuxt.config.js|ts]\nexport default {\n  nitro: {\n    preset: 'server',\n    timing: true\n  }\n}\n```\n\n```bash\n$ node .output/server/index.mjs\n> Cold Start (3ms)\nListening on http://localhost:3000\n> Load chunks/nitro/static (0ms)\n> Load chunks/app/render (1ms)\n> Load chunks/app/client.manifest (0ms)\n> Load chunks/index (3ms)\n> Load chunks/app/server (2ms)\n> Load chunks/app/vue3 (0ms)\n```\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"nodejs-server"},"children":[{"type":"text","value":"Node.js server"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"Discover the Node.js server preset with Nitro to deploy on any Node hosting."}]},{"type":"text","value":"\n"},{"type":"element","tag":"list","props":{},"children":[{"type":"element","tag":"prose-ul","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"Default preset"}]},{"type":"text","value":" if none is specified or auto-detected "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Loads only the required chunks to render the request for optimal cold start timing "},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Useful for debugging"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"alert","props":{"icon":"IconPresets"},"children":[{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Back to "},{"type":"element","tag":"prose-a","props":{"href":"/docs/deployment/presets"},"children":[{"type":"text","value":"presets list"}]},{"type":"text","value":"."}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"usage"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#usage"},"children":[{"type":"text","value":"Usage"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can use the "},{"type":"element","tag":"prose-a","props":{"href":"/docs/directory-structure/nuxt.config"},"children":[{"type":"text","value":"Nuxt config"}]},{"type":"text","value":" to explicity set the preset to use:"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js|ts"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  nitro"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    preset"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'server'"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Or directly use the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"NITRO_PRESET"}]},{"type":"text","value":" environment variable when running "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","assign-left","variable"]},"children":[{"type":"text","value":"NITRO_PRESET"}]},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"server npx nuxt build\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"entrypoint"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#entrypoint"},"children":[{"type":"text","value":"Entrypoint"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"When running "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nuxt build"}]},{"type":"text","value":" with the Node server preset, the result will be an entrypoint that launches a ready-to-run Node server."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"node .output/server/index.mjs\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"example"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#example"},"children":[{"type":"text","value":"Example"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"$ node .output/server/index.mjs\nListening on http://localhost:3000\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"server-timings"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#server-timings"},"children":[{"type":"text","value":"Server timings"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"You can enable the "},{"type":"element","tag":"prose-code-inline","props":{},"children":[{"type":"text","value":"nitro.timing"}]},{"type":"text","value":" option in order to have the logs about the chunk loading and cold start performance."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["filename"]},"children":[{"type":"text","value":"nuxt.config.js|ts"}]},{"type":"element","tag":"pre","props":{"className":["line-numbers","language-ts"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"export"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","keyword"]},"children":[{"type":"text","value":"default"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  nitro"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    preset"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","string"]},"children":[{"type":"text","value":"'server'"}]},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n    timing"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n  "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-code","props":{},"children":[{"type":"element","tag":"pre","props":{"className":["line-numbers","language-bash"]},"children":[{"type":"element","tag":"code","props":{},"children":[{"type":"text","value":"$ node .output/server/index.mjs\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Cold Start "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"3ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\nListening on http://localhost:3000\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Load chunks/nitro/static "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"0ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Load chunks/app/render "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"1ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Load chunks/app/client.manifest "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"0ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Load chunks/index "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"3ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Load chunks/app/server "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"2ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tag":"span","props":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" Load chunks/app/vue3 "},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"0ms"},{"type":"element","tag":"span","props":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"}]}]}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"usage","depth":2,"text":"Usage"},{"id":"entrypoint","depth":2,"text":"Entrypoint"},{"id":"example","depth":2,"text":"Example"},{"id":"server-timings","depth":2,"text":"Server timings"}]}}}